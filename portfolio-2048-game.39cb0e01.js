!function(){"use strict";var t,e,n=document.querySelectorAll(".field-cell"),o=document.querySelector("button"),r=document.querySelector(".game-score"),a=document.querySelector(".message-start"),u=document.querySelector(".message-win"),i=document.querySelector(".message-lose"),s=document.querySelector(".message-container"),l=document.querySelector(".game-score-number"),c=0;function d(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}var f={};Object.defineProperty(f,"Cell",{get:function(){return m},set:void 0,enumerable:!0,configurable:!0});var m=function t(e,n){d(this,t),this.x=e,this.y=n,this.valueNum=void 0};f=m;var v=new(function(){var t;function e(){d(this,e),this.board=[];for(var t=0;t<4;t++)for(var n=0;n<4;n++)this.board.push(new f(t,n))}return t=[{key:"getRandomCell",value:function(){var t=this.board.filter(function(t){return void 0===t.valueNum}),e=Math.floor(Math.random()*t.length);return t[e]||void 0}},{key:"getValues",value:function(){return this.board.filter(function(t){return void 0!==t.valueNum})}},{key:"addNumber",value:function(){var t=this.getRandomCell();t&&(t.valueNum=.9>=Math.random()?2:4)}},{key:"updateBoard",value:function(){this.board.forEach(function(t){var e=void 0!==t.valueNum?t.valueNum:void 0,n=t.x,o=t.y,r=document.getElementById("".concat(n,"-").concat(o));void 0!==e?(r.classList.value="",r.classList.add("field-cell"),r.textContent=e,r.classList.add("field-cell--".concat(e)),r.classList.toggle("animation-appear")):(r.textContent="",r.classList.value="",r.classList.add("field-cell"))})}},{key:"getBoardValues",value:function(){return this.board.map(function(t){return t.valueNum})}},{key:"isGameOver",value:function(){if(this.getRandomCell())return!1;var t=!0,e=!1,n=void 0;try{for(var o,r,a=this.board[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var u=(o=this,function(){var t=r.value,e=o.board.find(function(e){return e.x===t.x&&e.y===t.y+1}),n=o.board.find(function(e){return e.x===t.x+1&&e.y===t.y});if(e&&e.valueNum===t.valueNum||n&&n.valueNum===t.valueNum)return{v:!1}}());if("object"==(u&&"u">typeof Symbol&&u.constructor===Symbol?"symbol":typeof u))return u.v}}catch(t){e=!0,n=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw n}}return!0}}],function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(e.prototype,t),e}());o.removeAttribute("disabled"),a.style.bottom="40%",new Promise(function(t){window.addEventListener("load",function(){setTimeout(function(){t()},1e3)})}).then(function(){a.style.opacity="1",a.style.transform="scale(1.3)",setTimeout(function(){new Promise(function(t){t()}).then(function(){return a.style.bottom="0%",a.style.transform="scale(1)",new Promise(function(t){setTimeout(function(){t()},1e3)})}).then(function(){o.removeAttribute("disabled"),o.style.animation="button-bloom 1s ease"})},1e3)}),t=0,e=0,n.forEach(function(n){n.id="".concat(t,"-").concat(e),e<3?e++:(t++,e=0)}),o.addEventListener("click",function(t){s.style.opacity="0",a.style.opacity="0",i.style.bottom="0%",u.style.bottom="0%",a.style.bottom="0%",i.classList.add("hidden"),u.classList.add("hidden"),o.classList.contains("start")?(o.textContent="Restart",o.classList.remove("start"),o.classList.add("restart"),v.addNumber(),v.addNumber(),v.updateBoard()):o.classList.contains("restart")&&(v.getValues().forEach(function(t){t.valueNum=void 0}),v.updateBoard(),o.textContent="Start",o.style.width="100px",o.classList.remove("restart"),o.classList.add("start"),c=0,r.textContent="0")});document.addEventListener("keyup",function t(e){var n=v.board.reduce(function(t,e){return t[e.x]||(t[e.x]=[]),t[e.x].push(e),t},[]),o=v.board.reduce(function(t,e){return t[e.y]||(t[e.y]=[]),t[e.y].push(e),t},[]),a=v.getBoardValues(),d={ArrowLeft:function(){var t;return t=0,n.forEach(function(e){for(var n=e.map(function(t){return t.valueNum}).filter(function(t){return void 0!==t}),o=0;o<n.length-1;o++)n[o]===n[o+1]&&(n[o]*=2,t+=n[o],l.textContent="+".concat(n[o]),n.splice(o+1,1));for(;n.length<e.length;)n.push(void 0);for(var r=0;r<e.length;r++)e[r].valueNum=n[r]}),t},ArrowRight:function(){var t;return t=0,n.forEach(function(e){for(var n=e.map(function(t){return t.valueNum}).filter(function(t){return void 0!==t}),o=n.length-1;o>0;o--)n[o]===n[o-1]&&(n[o]*=2,t+=n[o],l.textContent="+".concat(n[o]),n.splice(o-1,1));for(;n.length<e.length;)n.unshift(void 0);for(var r=0;r<e.length;r++)e[r].valueNum=n[r]}),t},ArrowDown:function(){var t;return t=0,o.forEach(function(e){for(var n=e.map(function(t){return t.valueNum}).filter(function(t){return void 0!==t}),o=n.length-1;o>0;o--)n[o]===n[o-1]&&(n[o]*=2,t+=n[o],l.textContent="+".concat(n[o]),n.splice(o-1,1));for(;n.length<e.length;)n.unshift(void 0);for(var r=0;r<e.length;r++)e[r].valueNum=n[r]}),t},ArrowUp:function(){var t;return t=0,o.forEach(function(e){for(var n=e.map(function(t){return t.valueNum}).filter(function(t){return void 0!==t}),o=0;o<n.length-1;o++)n[o]===n[o+1]&&(n[o]*=2,t+=n[o],l.textContent="+".concat(n[o]),n.splice(o+1,1));for(;n.length<e.length;)n.push(void 0);for(var r=0;r<e.length;r++)e[r].valueNum=n[r]}),t}}[e.code];if(d){var f=d(),m=v.getBoardValues();a.some(function(t,e){return t!==m[e]})&&(f>0&&(r.textContent=c+=f,l.classList.add("animation-number-slide"),setTimeout(function(){l.classList.remove("animation-number-slide")},800),!0===v.board.some(function(t){return t.valueNum>=2048})&&(s.style.opacity="1",u.classList.remove("hidden"),setTimeout(function(){u.style.bottom="40%",u.style.transform="scale(1.3)"},1e3),document.removeEventListener("keyup",t))),v.addNumber(),v.isGameOver()&&(s.style.opacity="1",i.classList.remove("hidden"),i.textContent="You lose with ".concat(c," score"),setTimeout(function(){i.style.bottom="40%",i.style.transform="scale(1.3)"},1e3),document.removeEventListener("keyup",t)),v.updateBoard())}})}();
//# sourceMappingURL=portfolio-2048-game.39cb0e01.js.map
